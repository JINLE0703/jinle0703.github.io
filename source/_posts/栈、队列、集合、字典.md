---
title: 栈、队列、集合、字典
date: 2020-08-19 18:35:13
tags: 数据结构与算法
---

### 1. 栈

后进者先出，先进者后出，这就是典型的“栈”结构。当某个数据集合只涉及在一端插入和删除数据，并且满足后进先出、先进后出的特性，我们就应该首选“栈”这种数据结构。

栈既可以用数组来实现，也可以用链表来实现。用数组实现的栈，我们叫作**顺序栈**，用链表实现的栈，我们叫作**链式栈**。

<!-- more -->

#### 基于链表实现栈

```js
class Node {
    constructor(element) {
        this.element = element
        this.next = null
    }
}

class StackBasedLinkedList {
    constructor() {
        this.top = null
    }
    push(value) {
        const node = new Node(value)
        if (this.top === null) {
            this.top = node
        } else {
            node.next = this.top
            this.top = node
        }
    }
    pop() {
        if (this.top === null) {
            return -1
        }
        const value = this.top.element
        this.top = this.top.next
        return value
    }
    // 为了实现浏览器前进后退
    clear() {
        this.top = null
    }
    display() {
        if (this.top !== null) {
            let temp = this.top
            while (temp !== null) {
                console.log(temp.element)
                temp = temp.next
            }
        }
    }
}
```

#### 为什么函数调用要用“栈”来保存临时变量呢？用其他数据结构不行吗？

其实，我们不一定非要用栈来保存临时变量，只不过如果这个函数调用符合后进先出的特性，用栈这种数据结构来实现，是最顺理成章的选择。

从调用函数进入被调用函数，对于数据来说，变化的是什么呢？是作用域。所以根本上，只要能保证每进入一个新的函数，都是一个新的作用域就可以。而要实现这个，用栈就非常方便。在进入被调用函数的时候，分配一段栈空间给这个函数的变量，在函数结束的时候，将栈顶复位，正好回到调用函数的作用域内。

#### 应用场景

十进制转二进制、有效括号（leetcode20）

### 2. 队列

一种**先进先出**的数据结构，在 JavaScript 中用 Array 实现（`Array.push()` `Array.shift()`）

#### 应用场景

食堂排队打饭、JS 异步中的任务队列、计算最近请求次数（leetcode933）

### 3. 集合

一种**无序且唯一**的数据结构，ES6 中有集合，名为 Set

集合的常用操作：去重、判断某元素是否在集合种、求交集

```js
// 去重
const arr = [1, 1, 2, 2];
const arr2 = [...new Set(arr)]; // [1,2]

// 判断元素是否在集合中
const set = new Set(arr);
const has = set.has(3); // false

// 求交集
const set2 = new Set([2, 3]);
const set3 = new Set([...set].filter(item => set2.has(item)));
```

#### Set 操作

```js
let mySet = new Set();
// 添加
mySet.add(1);
mySet.add(5);
mySet.add(5);
mySet.add('some text');
let o = { a: 1, b: 2 };
mySet.add(o);
mySet.add({ a: 1, b: 2 });
// 验证
const has = mySet.has(o); // true
// 删除
mySet.delete(5);

// 遍历
for(let item of mySet) console.log(item); // 1 some text {a: 1, b: 2} {a: 1, b: 2}
for(let item of mySet.keys()) console.log(item);
for(let item of mySet.values()) console.log(item);
for(let [key, value] of mySet.entries()) console.log(key, value);

// set 转回 array
const myArr1 = [...mySet]
const myArr2 = Array.from(mySet);

// array 转 set
const mySet2 = new Set([1,2,3,4]);

// 求交集
const intersection = new Set([...mySet].filter(x => mySet2.has(x)));
// 求差集
const difference = new Set([...mySet].filter(x => !mySet2.has(x)));
```

#### 应用场景

两个数组的交集（leetcode349）

### 4. 字典

一种存储**唯一值**的数据结构，以**键值对**的形式来存储，ES6 种有字典，名为 Map

```js
const m = new Map();

// 增
m.set('a', 'aa'); // key: a, value: aa
m.set('b', 'bb');

// 删
m.delete('b');
// m.clear();

// 改
m.set('a', 'aaa');

// 查
m.get('a'); // aa
```

#### 应用场景

两个数组的交集（leetcode349）、有效的括号（leetcode20）、两数之和（leetcode1）、无重复字符的最长字串（leetcode3）、最小覆盖字串（leetcode76）